<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Maytoni UNITY – Подбор трековой системы</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    /* Убираем фиксированные высоты, чтобы содержимое могло расти */
    html, body {
      height: auto;
      overflow: visible;
    }
    .container {
      max-width: 800px;
      margin: auto;
      background-color: white;
      padding: 20px;
      border: 1px solid #ddd;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      /* Убираем фиксированную высоту, чтобы контейнер расширялся */
      height: auto;
    }
    h2 {
      font-size: 18px;
      margin-bottom: 10px;
    }
    .results-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      background-color: white;
      table-layout: auto;
    }
    .results-table th, .results-table td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
      word-wrap: break-word; /* Позволяет переносить длинные слова */
    }
    .results-table th {
      background-color: #f4f4f4;
      font-weight: bold;
    }
    .results-table th:nth-child(3),
    .results-table td:nth-child(3) {
      width: 100px;
    }
    .results-table th:nth-child(2),
    .results-table td:nth-child(2) {
      width: 50px;
      text-align: center;
    }
    .total-price {
      font-weight: bold;
      text-align: right;
      margin-top: 10px;
    }
    .result-container {
      display: none;
      /* Убираем overflow, чтобы содержимое отображалось полностью */
      overflow: visible;
    }
    .debug {
      font-size: 12px;
      color: red;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Заголовок системы -->
    <h2 id="systemName">Maytoni UNITY</h2>
    
    <!-- Контейнер для вывода результатов подбора -->
    <div id="resultContainer" class="result-container">
      <table class="results-table" id="resultsTable">
        <thead id="tableHeader">
          <tr>
            <th>Наименование</th>
            <th>кол.</th>
            <th>Цена за шт.</th>
            <th>Общая цена</th>
          </tr>
        </thead>
        <tbody id="results">
          <!-- Здесь будут выводиться результаты подбора -->
        </tbody>
      </table>
      <div id="totalPrice" class="total-price"></div>
    </div>
    
    <!-- Отладочный блок (при необходимости можно убрать) -->
    <div id="debug" class="debug"></div>
  </div>
  
  <script>
    // Ждём полной загрузки DOM
    document.addEventListener("DOMContentLoaded", function() {
      // Функция для выполнения подбора (здесь представлена заглушка, замените на реальную логику)
      function showSelection() {
        console.log("Начало работы showSelection");
        
        var systemNameEl = document.getElementById("systemName");
        if (systemNameEl) {
          systemNameEl.textContent = "Maytoni UNITY";
        } else {
          console.error("Элемент с id 'systemName' не найден.");
        }
        
        var resultsEl = document.getElementById("results");
        if (resultsEl) {
          // Пример вывода: одна строка с данными товара (замените на свою логику подбора)
          resultsEl.innerHTML = "<tr>" +
            "<td><img src='images/TRX001-112B.png' alt='' style='width:50px; height:auto; margin-right:10px;'>Шинопровод накладной черный 2м TRX001-112B</td>" +
            "<td style='background-color: white; text-align: center;'>1 шт.</td>" +
            "<td>2500р</td>" +
            "<td>2500р</td>" +
            "</tr>";
        } else {
          console.error("Элемент с id 'results' не найден.");
        }
        
        var totalPriceEl = document.getElementById("totalPrice");
        if (totalPriceEl) {
          totalPriceEl.innerHTML = "<div>Итого: 2500р</div>";
        } else {
          console.error("Элемент с id 'totalPrice' не найден.");
        }
        
        var resultContainerEl = document.getElementById("resultContainer");
        if (resultContainerEl) {
          resultContainerEl.style.display = "block";
        } else {
          console.error("Элемент с id 'resultContainer' не найден.");
        }
        
        // Убираем отладочную надпись, чтобы она не дублировалась
        var debugEl = document.getElementById("debug");
        if (debugEl) {
          debugEl.textContent = "";
        }
        
        console.log("Подбор завершён успешно.");
      }
      
      function safeShowSelection() {
        try {
          showSelection();
        } catch (e) {
          console.error("Ошибка в showSelection:", e);
          alert("Произошла ошибка при подборе. Проверьте консоль для подробностей.");
        }
      }
      
      // Для демонстрации запускаем функцию через 1 секунду (замените вызов на ваше событие, например, по нажатию кнопки)
      setTimeout(safeShowSelection, 1000);
    });
  </script>
</body>
</html>
